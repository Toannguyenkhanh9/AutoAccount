<div class="page">
  <!-- Content -->
  <div class="content">
    <form class="config-form" [formGroup]="form">
      <!-- Company -->
      <div class="group">
        <div class="group-title" style="font-size: 16px; font-weight: bold">
          Basic Information
        </div>
        <div class="grid2">
          <label
            >New Company Name
            <input
              class="mono"
              [ngModelOptions]="{ standalone: true }"
              [(ngModel)]="form.get('company.code')!.value"
              (ngModelChange)="form.get('company.code')!.setValue($event)"
              (blur)="form.get('company.code')!.markAsTouched()"
              [class.invalid]="
                form.get('company.code')!.invalid &&
                form.get('company.code')!.touched
              "
            />
            <small
              class="err"
              *ngIf="
                form.get('company.code')!.hasError('required') &&
                form.get('company.code')!.touched
              "
            >
              New Company Name is required
            </small>
          </label>
        </div>
        <br>
        <!-- Accounting Period -->
        <div class="group">
          <div class="group-title" style="font-size: 16px; font-weight: bold">
            Start Date
          </div>
          <div class="grid2">
            <label
              >Fiscal Year Start
              <input
                type="date"
                [ngModelOptions]="{ standalone: true }"
                [(ngModel)]="form.get('period.fiscalYearStartMonth')!.value"
                (ngModelChange)="
                  form.get('period.fiscalYearStartMonth')!.setValue($event)
                "
                (blur)="
                  form.get('period.fiscalYearStartMonth')!.markAsTouched()
                "
                [class.invalid]="
                  form.get('period.fiscalYearStartMonth')!.invalid &&
                  form.get('period.fiscalYearStartMonth')!.touched
                "
              />
              <small
                class="err"
                *ngIf="
                  form
                    .get('period.fiscalYearStartMonth')!
                    .hasError('required') &&
                  form.get('period.fiscalYearStartMonth')!.touched
                "
              >
                Start date is required
              </small>
              <small class="note"
                >Specify the start date of this account book.</small
              >
            </label>
            <label
              >Actual Data Start Date
              <input
                type="date"
                [ngModelOptions]="{ standalone: true }"
                [(ngModel)]="form.get('period.openingDate')!.value"
                (ngModelChange)="
                  form.get('period.openingDate')!.setValue($event)
                "
                (blur)="form.get('period.openingDate')!.markAsTouched()"
                [class.invalid]="
                  form.get('period.openingDate')!.invalid &&
                  form.get('period.openingDate')!.touched
                "
              />
              <small
                class="err"
                *ngIf="
                  form.get('period.openingDate')!.hasError('required') &&
                  form.get('period.openingDate')!.touched
                "
              >
                Actual data start date is required
              </small>
              <!-- giữ phần note dài như hiện có -->
              <small class="note">Specify the start date of the actual data to be entered in this account book. If Actual Data Start Date is greater than Fiscal Year Start Date, then you can maintain current year account balance in Year To Date Maintenance.</small>
            </label>
          </div>
        </div>

        <div class="group">
          <div class="group-title" style="font-size: 16px; font-weight: bold">
            Local Currency Setting
          </div>
          <!-- Country -->
          <div class="grid2">
            <label
              >Country
              <select
                formControlName="country"
                (blur)="form.get('country')!.markAsTouched()"
                [class.invalid]="
                  form.get('country')!.invalid && form.get('country')!.touched
                "
              >
                <option [ngValue]="null" disabled>Select a country</option>
                <option *ngFor="let c of countries" [ngValue]="c">
                  {{ c }}
                </option>
              </select>
              <small
                class="err"
                *ngIf="
                  form.get('country')!.hasError('required') &&
                  form.get('country')!.touched
                "
              >
                Country is required
              </small>
            </label>
            <label
              >Local Currency Code
              <input type="text" formControlName="localCurrencyCode" />
            </label>
          </div>

          <br>
          <div class="grid2">
            <label
              >Symbol
              <input type="text" formControlName="symbol" />
            </label>
          </div>
          <br>
          <div class="grid2 equal-label">
            <label>
              Local Currency Word
              <input type="text" formControlName="wordEn" />
            </label>

            <!-- cột phải: tạo nhãn giả để giữ đúng chiều cao -->
            <label>
              <span class="ghost-label">Local Currency Word</span>
              <input type="text" formControlName="wordLocal" />
            </label>
          </div>
        </div>
        <br>
        <div class="group">
          <div class="group-title" style="font-size: 16px; font-weight: bold">
            Account Code Format
          </div>

          <div class="grid2 account-format">
            <!-- Left: input + note -->
            <label>
              Account Code Format
              <input
                type="text"
                [ngModelOptions]="{ standalone: true }"
                [(ngModel)]="form.get('number.qtyDecimals')!.value"
                (ngModelChange)="
                  form.get('number.qtyDecimals')!.setValue($event)
                "
                placeholder="AAA-AAAA"
              />
              <small class="note">
                (Note: To use free format, leave the Account Code Format field
                empty.)
              </small>
            </label>

            <!-- Right: meaning table -->
            <div class="meaning">
              <table class="meaning-table">
                <thead>
                  <tr>
                    <th style="width: 80px">Character</th>
                    <th>Meaning</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>L</td>
                    <td>
                      An <b>L</b> character requires an uppercase alphabetic
                      character only in this position (A–Z).
                    </td>
                  </tr>
                  <tr>
                    <td>A</td>
                    <td>
                      An <b>A</b> character requires an alphanumeric character
                      only in this position (A–Z, 0–9).
                    </td>
                  </tr>
                  <tr>
                    <td>0</td>
                    <td>
                      A <b>0</b> character requires a numeric character only in
                      this position.
                    </td>
                  </tr>
                  <tr>
                    <td>/ - ( ) &#123; &#125;</td>
                    <td>Literal.</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="group">
          <div class="group-title" style="font-size: 16px; font-weight: bold">
            Sample Chart of Account
          </div>
          <div class="grid2">
            <label
              >Create sample Chart of Accounts
              <select
                [ngModelOptions]="{ standalone: true }"
                [(ngModel)]="form.get('coa.template')!.value"
                (ngModelChange)="form.get('coa.template')!.setValue($event)"
              >
                <option *ngFor="let t of coaTemplates" [ngValue]="t.value">
                  {{ t.label }}
                </option>
              </select>
            </label>
          </div>
        </div>
        <br />
        <div class="dialog-actions">
          <button class="btn cancel" (click)="onCancel()">Cancel</button>
          <button class="btn primary" (click)="createNow()" [disabled]="form.invalid">Create</button>
        </div>
      </div>

      <!-- done dialog -->
      <div class="dialog" *ngIf="showDone()">
        <div class="dialog-panel-small">
          <div class="dialog-title">
            Setup Complete
            <button class="x" (click)="closeDone()">&times;</button>
          </div>
          <div class="dialog-body">
            <p>Your account book has been created successfully.</p>
          </div>
          <div class="dialog-actions">
            <button class="btn primary" (click)="closeDone()">OK</button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
